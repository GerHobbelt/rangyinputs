<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <title></title>
    <script type="text/javascript">
        function splitIntoLines(str) {
            var regex = /\r\n|\n/g, lines = [], previousIndex = 0, nextIndex, result;
            while ((result = regex.exec(str))) {
                nextIndex = result.index;
                lines.push(str.slice(previousIndex, nextIndex));
                previousIndex = nextIndex + result[0].length;
            }
            lines.push(str.slice(previousIndex));
            return lines;
        }

        var s = "1\r\n\r\n2\r\n3\n4\n\n5";
        document.write(s.split(/\r\n|\n/).join("[LF]") + "<br>");
        document.write(splitIntoLines(s).join("[LF]") + "<br>");
        document.write(s.split("\r\n").join("[LF]") + "<br>");

        var s2 = "123\n";
        document.write(s2.split(/\r\n|\n/).join("[LF]") + "<br>");
        document.write(splitIntoLines(s2).join("[LF]") + "<br>");
    </script>
</head>
<body>

</body>
</html>